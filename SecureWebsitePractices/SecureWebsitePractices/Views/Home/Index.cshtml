@{
    ViewBag.Title = "Home Page";
}

<div class="jumbotron">
    <h1>ASP.NET</h1>
    <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS and JavaScript.</p>
    <p><a href="http://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>
</div>

@if (!User.Identity.IsAuthenticated)
{
    <hgroup class="title">
        <h1>Profile.</h1>
        <h2>Hey, how about you login then securely view your profile?</h2>
    </hgroup>
}
else
{
    <hgroup class="title">
        <h1>Welcome.</h1>
        <h2>Hi @User.Identity.Name!</h2>
    </hgroup>

    <p>
        <button id="loadButton">View my profile</button>
    </p>
    <p id="loader" style="display: none;">Loading profile...</p>

    <p id="profile" style="display: none;">
        <label>Birth date</label><span id="birthDate"></span>
        <label>Tax file number</label><span id="taxFileNumber"></span>
        <label>Address</label><span id="address"></span>
    </p>


}

<div class="row">
    <div class="col-md-4">
        <h2>Getting started</h2>
        <p>
            ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
            enables a clean separation of concerns and gives you full control over markup
            for enjoyable, agile development.
        </p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301865">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Get more libraries</h2>
        <p>NuGet is a free Visual Studio extension that makes it easy to add, remove, and update libraries and tools in Visual Studio projects.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301866">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Web Hosting</h2>
        <p>You can easily find a web hosting company that offers the right mix of features and price for your applications.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301867">Learn more &raquo;</a></p>
    </div>
</div>


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
<script type="text/javascript">
        $(document).ready(function () {
            $("#loadButton").click(function () {
      $('#loader').fadeIn('slow');

      $.get('Profile?userName=@User.Identity.Name', function (data) {
        $('#birthDate').text(data.Email);
        $('#taxFileNumber').text(data.TaxFileNumber);
        $('#address').text(data.Address);

        $('#profile').delay(2000).fadeIn('slow');
        $('#loader').fadeOut('slow');
      });
    });
        });

</script>
}